
@margin: 4px;
@base: #182c40;
@face: #294a6b;
@boxBg: #466788;
@text: #b7cbe0;
@highlight: #b92;
@gridlines: darken(@boxBg, 3%);
@griddark: darken(@boxBg, 5%);
@gridblack: fadeout(darken(@boxBg, 9%), 73%);
@gridgroup: darken(@boxBg, 1.5%);

@pianoWhite: #eee;
@pianoBlack: #333;
@pianoLine1: darken(@pianoBlack, 5%);
@pianoLine2: lighten(@pianoBlack, 50%);

// @base: darken(@boxBg, 23%);
// @face: darken(@boxBg, 10%);
// @boxBg: #466788;
// @text: lighten(@boxBg, 29%);


background: @base;

content {
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	display: flex;
	flex-direction: column;
	font-size: 11px;
	padding: @margin + 1px;
	color: darken(@text, 7%);
	text-shadow: 0 1px 0 rgba(0,0,0,.35);

	&.hide-cursor:before {
		content: "";
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		z-index: 999;
		background: transparent;
		cursor: none;
	}

	> div {
		margin-top: @margin;
	}

	.box {
		background: @face;
		position: relative;
		padding: @margin;
		border-radius: 5px;

		.box-body {
			background: @boxBg;
			box-shadow: inset 0 1px 0 fadeout(lighten(@boxBg, 5%), 50%),
						0 1px 0 darken(@boxBg, 15%);
			position: relative;
			width: 100%;
			height: 100%;
			border-radius: 3px;
		}
	}

	.space {
		flex: auto;
		background: darken(@boxBg, 2%);
		border-radius: 3px;
		box-shadow: 0 0 0;
	}

	.buttons {
		width: 25px;
	}

	.ball-button {
		background: @face;
		position: relative;
		width: 23px;
		height: 23px;
		border-radius: 50%;
		margin-bottom: @margin;
		cursor: pointer;

		&.active {
			i[class*="icon-"] {
				background-size: 85% auto;
				filter: brightness(5) hue-rotate(30deg) drop-shadow(0 1px 0 darken(@boxBg, 21%));
			}
		}

		i[class*="icon-"] {
			top: 3px;
			left: 3px;
			transition: all 150ms ease;
			//transform-origin: 50% 50%;
		}
	}

	.knob2 {
		position: relative;
		display: inline-block;
		width: 25px;
		height: 25px;
		margin: 1px 31px 0 3px;
		border-radius: 50%;
		// background-color: rgba(0,0,0,.1);
		background: url(~/icons/knob2.png) no-repeat;
		background-size: 100% auto;

		&:after {
			content: "0.00 ms";
			position: absolute;
			left: 17px;
			bottom: -1px;
			font-size: 10px;
			font-weight: 300;
			text-shadow: 0 0 0;
			white-space: nowrap;
			color: @base;
		}

		&[data-value="0"], &[data-value="1"] { background-position: 0 0; } 
		&[data-value="2"], &[data-value="3"] { background-position: 0 -25px; }
		&[data-value="4"], &[data-value="5"] { background-position: 0 -50px; }
		&[data-value="6"], &[data-value="7"] { background-position: 0 -75px; }
		&[data-value="8"], &[data-value="9"] { background-position: 0 -100px; }
		&[data-value="10"], &[data-value="11"] { background-position: 0 -125px; }
		&[data-value="12"], &[data-value="13"] { background-position: 0 -150px; }
		&[data-value="14"], &[data-value="15"] { background-position: 0 -175px; }
		&[data-value="16"], &[data-value="17"] { background-position: 0 -200px; }
		&[data-value="18"], &[data-value="19"] { background-position: 0 -225px; }
		&[data-value="20"], &[data-value="21"] { background-position: 0 -250px; }
		&[data-value="22"], &[data-value="23"] { background-position: 0 -275px; }
		&[data-value="24"], &[data-value="25"] { background-position: 0 -300px; }
		&[data-value="26"], &[data-value="27"] { background-position: 0 -325px; }
		&[data-value="28"], &[data-value="29"] { background-position: 0 -350px; }
		&[data-value="30"], &[data-value="31"] { background-position: 0 -375px; }
		&[data-value="32"], &[data-value="33"] { background-position: 0 -400px; }
		&[data-value="34"], &[data-value="35"] { background-position: 0 -425px; }
		&[data-value="36"], &[data-value="37"] { background-position: 0 -450px; }
		&[data-value="38"], &[data-value="39"] { background-position: 0 -475px; }
		&[data-value="40"], &[data-value="41"] { background-position: 0 -500px; }
		&[data-value="42"], &[data-value="43"] { background-position: 0 -525px; }
		&[data-value="44"], &[data-value="45"] { background-position: 0 -550px; }
		&[data-value="46"], &[data-value="47"] { background-position: 0 -575px; }
		&[data-value="48"], &[data-value="49"] { background-position: 0 -600px; }
		&[data-value="50"], &[data-value="51"] { background-position: 0 -625px; }
		&[data-value="52"], &[data-value="53"] { background-position: 0 -650px; }
		&[data-value="54"], &[data-value="55"] { background-position: 0 -675px; }
		&[data-value="56"], &[data-value="57"] { background-position: 0 -700px; }
		&[data-value="58"], &[data-value="59"] { background-position: 0 -725px; }
		&[data-value="60"], &[data-value="61"] { background-position: 0 -750px; }
		&[data-value="62"], &[data-value="63"] { background-position: 0 -775px; }
		&[data-value="64"], &[data-value="65"] { background-position: 0 -800px; }
		&[data-value="66"], &[data-value="67"] { background-position: 0 -825px; }
		&[data-value="68"], &[data-value="69"] { background-position: 0 -850px; }
		&[data-value="70"], &[data-value="71"] { background-position: 0 -875px; }
		&[data-value="72"], &[data-value="73"] { background-position: 0 -900px; }
		&[data-value="74"], &[data-value="75"] { background-position: 0 -925px; }
		&[data-value="76"], &[data-value="77"] { background-position: 0 -950px; }
		&[data-value="78"], &[data-value="79"] { background-position: 0 -975px; }
		&[data-value="80"], &[data-value="81"] { background-position: 0 -1000px; }
		&[data-value="82"], &[data-value="83"] { background-position: 0 -1025px; }
		&[data-value="84"], &[data-value="85"] { background-position: 0 -1050px; }
		&[data-value="86"], &[data-value="87"] { background-position: 0 -1075px; }
		&[data-value="88"], &[data-value="89"] { background-position: 0 -1100px; }
		&[data-value="90"], &[data-value="91"] { background-position: 0 -1125px; }
		&[data-value="92"], &[data-value="93"] { background-position: 0 -1150px; }
		&[data-value="94"], &[data-value="95"] { background-position: 0 -1175px; }
		&[data-value="96"], &[data-value="97"] { background-position: 0 -1200px; }
		&[data-value="98"], &[data-value="99"] { background-position: 0 -1225px; }
		&[data-value="100"] { background-position: 0 -1250px; }
	}

	.knob {
		position: relative;
		display: inline-block;
		width: 34px;
		height: 34px;
		margin: 1px 3px 0;
		background: url(~/icons/knob.png) no-repeat;
		background-size: 100% auto;
		text-transform: uppercase;
		text-align: center;
		font-size: 10px;
		// font-weight: 100;
		color: darken(@face, 3%);
		text-shadow: 0 0 0;
		//background-color: rgba(0,0,0,.1);

		&[data-label]:before {
			content: attr(data-label);
			position: absolute;
			bottom: -3px;
			left: 0;
			right: 0;
			z-index: 3;
			pointer-events: none;
		}

		&[data-title]:before {
			content: attr(data-title);
			position: absolute;
			bottom: -11px;
			left: -11px;
			right: -11px;
			z-index: 3;
			pointer-events: none;
		}

		&[data-value="0"], &[data-value="1"] { background-position: 0 0; } 
		&[data-value="2"], &[data-value="3"] { background-position: 0 -34px; }
		&[data-value="4"], &[data-value="5"] { background-position: 0 -68px; }
		&[data-value="6"], &[data-value="7"] { background-position: 0 -102px; }
		&[data-value="8"], &[data-value="9"] { background-position: 0 -136px; }
		&[data-value="10"], &[data-value="11"] { background-position: 0 -170px; }
		&[data-value="12"], &[data-value="13"] { background-position: 0 -204px; }
		&[data-value="14"], &[data-value="15"] { background-position: 0 -238px; }
		&[data-value="16"], &[data-value="17"] { background-position: 0 -272px; }
		&[data-value="18"], &[data-value="19"] { background-position: 0 -306px; }
		&[data-value="20"], &[data-value="21"] { background-position: 0 -340px; }
		&[data-value="22"], &[data-value="23"] { background-position: 0 -374px; }
		&[data-value="24"], &[data-value="25"] { background-position: 0 -408px; }
		&[data-value="26"], &[data-value="27"] { background-position: 0 -442px; }
		&[data-value="28"], &[data-value="29"] { background-position: 0 -476px; }
		&[data-value="30"], &[data-value="31"] { background-position: 0 -510px; }
		&[data-value="32"], &[data-value="33"] { background-position: 0 -544px; }
		&[data-value="34"], &[data-value="35"] { background-position: 0 -578px; }
		&[data-value="36"], &[data-value="37"] { background-position: 0 -612px; }
		&[data-value="38"], &[data-value="39"] { background-position: 0 -646px; }
		&[data-value="40"], &[data-value="41"] { background-position: 0 -680px; }
		&[data-value="42"], &[data-value="43"] { background-position: 0 -714px; }
		&[data-value="44"], &[data-value="45"] { background-position: 0 -748px; }
		&[data-value="46"], &[data-value="47"] { background-position: 0 -782px; }
		&[data-value="48"], &[data-value="49"] { background-position: 0 -816px; }
		&[data-value="50"], &[data-value="51"] { background-position: 0 -850px; }
		&[data-value="52"], &[data-value="53"] { background-position: 0 -884px; }
		&[data-value="54"], &[data-value="55"] { background-position: 0 -918px; }
		&[data-value="56"], &[data-value="57"] { background-position: 0 -952px; }
		&[data-value="58"], &[data-value="59"] { background-position: 0 -986px; }
		&[data-value="60"], &[data-value="61"] { background-position: 0 -1020px; }
		&[data-value="62"], &[data-value="63"] { background-position: 0 -1054px; }
		&[data-value="64"], &[data-value="65"] { background-position: 0 -1088px; }
		&[data-value="66"], &[data-value="67"] { background-position: 0 -1122px; }
		&[data-value="68"], &[data-value="69"] { background-position: 0 -1156px; }
		&[data-value="70"], &[data-value="71"] { background-position: 0 -1190px; }
		&[data-value="72"], &[data-value="73"] { background-position: 0 -1224px; }
		&[data-value="74"], &[data-value="75"] { background-position: 0 -1258px; }
		&[data-value="76"], &[data-value="77"] { background-position: 0 -1292px; }
		&[data-value="78"], &[data-value="79"] { background-position: 0 -1326px; }
		&[data-value="80"], &[data-value="81"] { background-position: 0 -1360px; }
		&[data-value="82"], &[data-value="83"] { background-position: 0 -1394px; }
		&[data-value="84"], &[data-value="85"] { background-position: 0 -1428px; }
		&[data-value="86"], &[data-value="87"] { background-position: 0 -1462px; }
		&[data-value="88"], &[data-value="89"] { background-position: 0 -1496px; }
		&[data-value="90"], &[data-value="91"] { background-position: 0 -1530px; }
		&[data-value="92"], &[data-value="93"] { background-position: 0 -1564px; }
		&[data-value="94"], &[data-value="95"] { background-position: 0 -1598px; }
		&[data-value="96"], &[data-value="97"] { background-position: 0 -1632px; }
		&[data-value="98"], &[data-value="99"] { background-position: 0 -1666px; }
		&[data-value="100"] { background-position: 0 -1700px; }
	}

	.pan-knob {
		position: relative;
		display: inline-block;
		width: 34px;
		height: 34px;
		margin: 1px 3px 0;
		background: url(~/icons/pan-knob.png) no-repeat;
		background-size: 100% auto;

		&:before {
			content: "";
			position: absolute;
			top: -3px;
			left: 14px;
			border-left: 3px solid transparent;
			border-right: 3px solid transparent;
			border-top: 5px solid lighten(@boxBg, 23%);
		}

		&[data-value="-50"], &[data-value="-49"] { background-position: 0 0;  }
		&[data-value="-48"], &[data-value="-47"] { background-position: 0 -34px; }
		&[data-value="-46"], &[data-value="-45"] { background-position: 0 -68px; }
		&[data-value="-44"], &[data-value="-43"] { background-position: 0 -102px; }
		&[data-value="-42"], &[data-value="-41"] { background-position: 0 -136px; }
		&[data-value="-40"], &[data-value="-39"] { background-position: 0 -170px; }
		&[data-value="-38"], &[data-value="-37"] { background-position: 0 -204px; }
		&[data-value="-36"], &[data-value="-35"] { background-position: 0 -238px; }
		&[data-value="-34"], &[data-value="-33"] { background-position: 0 -272px; }
		&[data-value="-32"], &[data-value="-31"] { background-position: 0 -306px; }
		&[data-value="-30"], &[data-value="-29"] { background-position: 0 -340px; }
		&[data-value="-28"], &[data-value="-27"] { background-position: 0 -374px; }
		&[data-value="-26"], &[data-value="-25"] { background-position: 0 -408px; }
		&[data-value="-24"], &[data-value="-23"] { background-position: 0 -442px; }
		&[data-value="-22"], &[data-value="-21"] { background-position: 0 -476px; }
		&[data-value="-20"], &[data-value="-19"] { background-position: 0 -510px; }
		&[data-value="-18"], &[data-value="-17"] { background-position: 0 -544px; }
		&[data-value="-16"], &[data-value="-15"] { background-position: 0 -578px; }
		&[data-value="-14"], &[data-value="-13"] { background-position: 0 -612px; }
		&[data-value="-12"], &[data-value="-11"] { background-position: 0 -646px; }
		&[data-value="-10"], &[data-value="-9"] { background-position: 0 -680px; }
		&[data-value="-8"], &[data-value="-7"] { background-position: 0 -714px; }
		&[data-value="-6"], &[data-value="-5"] { background-position: 0 -748px; }
		&[data-value="-4"], &[data-value="-3"] { background-position: 0 -782px; }
		&[data-value="-2"], &[data-value="-1"] { background-position: 0 -816px; }
		&[data-value="0"] { background-position: 0 -850px; &:before { border-top-color: @face; } }
		&[data-value="2"], &[data-value="1"] { background-position: 0 -884px; }
		&[data-value="4"], &[data-value="3"] { background-position: 0 -918px; }
		&[data-value="6"], &[data-value="5"] { background-position: 0 -952px; }
		&[data-value="8"], &[data-value="7"] { background-position: 0 -986px; }
		&[data-value="10"], &[data-value="9"] { background-position: 0 -1020px; }
		&[data-value="12"], &[data-value="11"] { background-position: 0 -1054px; }
		&[data-value="14"], &[data-value="13"] { background-position: 0 -1088px; }
		&[data-value="16"], &[data-value="15"] { background-position: 0 -1122px; }
		&[data-value="18"], &[data-value="17"] { background-position: 0 -1156px; }
		&[data-value="20"], &[data-value="19"] { background-position: 0 -1190px; }
		&[data-value="22"], &[data-value="21"] { background-position: 0 -1224px; }
		&[data-value="24"], &[data-value="23"] { background-position: 0 -1258px; }
		&[data-value="26"], &[data-value="25"] { background-position: 0 -1292px; }
		&[data-value="28"], &[data-value="27"] { background-position: 0 -1326px; }
		&[data-value="30"], &[data-value="29"] { background-position: 0 -1360px; }
		&[data-value="32"], &[data-value="31"] { background-position: 0 -1394px; }
		&[data-value="34"], &[data-value="33"] { background-position: 0 -1428px; }
		&[data-value="36"], &[data-value="35"] { background-position: 0 -1462px; }
		&[data-value="38"], &[data-value="37"] { background-position: 0 -1496px; }
		&[data-value="40"], &[data-value="39"] { background-position: 0 -1530px; }
		&[data-value="42"], &[data-value="41"] { background-position: 0 -1564px; }
		&[data-value="44"], &[data-value="43"] { background-position: 0 -1598px; }
		&[data-value="46"], &[data-value="45"] { background-position: 0 -1632px; }
		&[data-value="48"], &[data-value="47"] { background-position: 0 -1666px; }
		&[data-value="50"], &[data-value="49"] { background-position: 0 -1700px; }
	}

	.volume {
		background: @base;
		position: relative;
		width: 10px;
		height: 115px;
		border: 2px solid @face;
		border-radius: 3px;
		display: inline-block;
		//vertical-align: top;
		margin-left: 3px;
		margin-right: 17px;
		--eq: 0%;

		&.anim:after {
			animation: 1000ms spectrum linear infinite backwards;
		}

		&:before {
			content: "";
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			border-radius: 2px;
			background: linear-gradient(0deg, #0f0 0%, #96f 75%, #f00 100%);
		}

		&:after {
			content: "";
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			height: calc( 100% - var( --eq ) );
			//transform: scaleY(0.3);
			transform-origin: 0 0;
			// border-radius: 2px 2px 0 0;
			background: inherit;
		}

		div {
			position: absolute;
			top: 0;
			bottom: 0;
			right: -11px;
			width: 5px;
			// border-top: 1px solid @face;
			// border-bottom: 1px solid @face;
			// background: rgba(0,0,0,.1);
			background-image: linear-gradient(180deg,
					@face 0px, @face 1px,
					transparent 1px, transparent 11px,
					@face 11px, @face 12px,
					transparent 12px, transparent 28px,
					@face 28px, @face 29px,
					transparent 29px, transparent 44px,
					@face 44px, @face 45px,
					transparent 45px, transparent 61px,
					@face 61px, @face 62px,
					transparent 62px, transparent 77px,
					@face 77px, @face 78px,
					transparent 78px, transparent 94px,
					@face 94px, @face 95px,
					transparent 95px, transparent 110px,
					@face 110px, @face 111px,
					transparent 111px, transparent 120px
				);

			&:before {
				// content: "0 6 12 18 24 30 36 42 48 60";
				content: "0 10 20 30 40 50 60";
				position: absolute;
				top: 4px;
				width: 9px;
				right: -11px;
				text-align: right;
				line-height: 1.82;
				font-size: 9px;
				font-weight: 100;
				color: darken(@face, 5%);
			}

			&:after {
				content: "";
				background: @boxBg;
				position: absolute;
				top: 12%;
				left: -17px;
				height: 3px;
				width: 10px;
				z-index: 2;
				cursor: ns-resize;
				margin-top: -1px;
				border-left: 3px solid #b6c5ff;
				border-right: 3px solid #b6c5ff;
			}
		}

		&[data-value="0"] div:after { top: 100%; }
		&[data-value="2"] div:after { top: 98%; }
		&[data-value="4"] div:after { top: 96%; }
		&[data-value="6"] div:after { top: 94%; }
		&[data-value="8"] div:after { top: 92%; }
		&[data-value="10"] div:after { top: 90%; }
		&[data-value="12"] div:after { top: 88%; }
		&[data-value="14"] div:after { top: 86%; }
		&[data-value="16"] div:after { top: 84%; }
		&[data-value="18"] div:after { top: 82%; }
		&[data-value="20"] div:after { top: 80%; }
		&[data-value="22"] div:after { top: 78%; }
		&[data-value="24"] div:after { top: 76%; }
		&[data-value="26"] div:after { top: 74%; }
		&[data-value="28"] div:after { top: 72%; }
		&[data-value="30"] div:after { top: 70%; }
		&[data-value="32"] div:after { top: 68%; }
		&[data-value="34"] div:after { top: 66%; }
		&[data-value="36"] div:after { top: 64%; }
		&[data-value="38"] div:after { top: 62%; }
		&[data-value="40"] div:after { top: 60%; }
		&[data-value="42"] div:after { top: 58%; }
		&[data-value="44"] div:after { top: 56%; }
		&[data-value="46"] div:after { top: 54%; }
		&[data-value="48"] div:after { top: 52%; }
		&[data-value="50"] div:after { top: 50%; }
		&[data-value="52"] div:after { top: 48%; }
		&[data-value="54"] div:after { top: 46%; }
		&[data-value="56"] div:after { top: 44%; }
		&[data-value="58"] div:after { top: 42%; }
		&[data-value="60"] div:after { top: 40%; }
		&[data-value="62"] div:after { top: 38%; }
		&[data-value="64"] div:after { top: 36%; }
		&[data-value="66"] div:after { top: 34%; }
		&[data-value="68"] div:after { top: 32%; }
		&[data-value="70"] div:after { top: 30%; }
		&[data-value="72"] div:after { top: 28%; }
		&[data-value="74"] div:after { top: 26%; }
		&[data-value="76"] div:after { top: 24%; }
		&[data-value="78"] div:after { top: 22%; }
		&[data-value="80"] div:after { top: 20%; }
		&[data-value="82"] div:after { top: 18%; }
		&[data-value="84"] div:after { top: 16%; }
		&[data-value="86"] div:after { top: 14%; }
		&[data-value="88"] div:after { top: 12%; }
		&[data-value="90"] div:after { top: 10%; }
		&[data-value="92"] div:after { top: 8%; }
		&[data-value="94"] div:after { top: 6%; }
		&[data-value="96"] div:after { top: 4%; }
		&[data-value="98"] div:after { top: 2%; }
		&[data-value="100"] div:after { top: 0%; }
	}


	.field-row {
		padding-bottom: 7px;
	}

	input {
		&[type="text"] {
			display: inline-block;
			background: lighten(@boxBg, 7%);
			color: @base;
			width: auto;
			height: 19px;
			border: 0;
			// border: 1px solid;
			// border-color: @boxBg transparent lighten(@boxBg, 11%) transparent;
			border-radius: 2px;
			box-shadow: 0 0 0 2px @face,
						// inset 0 1px 0 darken(@boxBg, 2%),
						inset 0 -1px 0 lighten(@boxBg, 11%);
			padding: 3px 3px 2px;
			margin: 2px 3px 0 2px;

			&.right { text-align: right; }
			&.w30 { width: 31px; }
		}
	}

	.checkbox {
		background: transparent;
		position: relative;
		display: inline-block;
		width: 13px;
		height: 13px;
		margin: 1px 3px 5px 2px;
		border: 0;
		border-radius: 2px;
		box-shadow: 0 0 0 2px @face;

		input[type="checkbox"] {
			width: inherit;
			height: inherit;
			opacity: 0;

			&:checked + i {
				display: block;
			}
		}

		i {
			display: none;
			position: absolute;
			top: 1px;
			left: 1px;
			right: 1px;
			bottom: 1px;
			z-index: 1;
			// background: #fff;
			// border: 1px solid #a5a5a5;
			// border-radius: inherit;

			&:after {
				content: "";
				position: absolute;
				top: 1px;
				left: 0;
				width: 9px;
				height: 4px;
				border: 2px solid @face;
				border-top: 0;
				border-right: 0;
				transform: rotate( -45deg );
			}
		}

		+ label {
			position: relative;
			top: 1px;
			// cursor: pointer;
		}
	}

	.button,
	.toggle-btn {
		position: relative;
		display: inline-block;
		background: @face;
		padding: 2px 2px 2px 23px;
		border-radius: 3px;
		cursor: pointer;

		&:before,
		&:after {
			content: "";
			position: absolute;
			z-index: 1;
			top: 3px;
			left: 3px;
			width: 17px;
			height: 17px;
			background-position: 2px 2px;
			background-repeat: no-repeat;
			background-size: 13px 13px;
			background-image: url(~/icons/icon-red-cancel.png);
			filter: drop-shadow(0 1px 0 rgba(0,0,0,.35));
		}

		&:after {
			background-image: url(~/icons/icon-green-check.png);
			left: auto;
			right: 3px;
		}

		&:hover {
			> span {
				background: lighten(@boxBg, 5%);
			}
		}

		&.on > span {
			left: -21px;
			border-radius: 2px 0 0 2px;
		}

		> span {
			position: relative;
			z-index: 2;
			padding: 4px 7px;
			background: lighten(@boxBg, 1%);
			// background-image: linear-gradient(0deg, rgba(0,0,0,.075) 50%, transparent 100%);
			box-shadow: inset 0 1px 0 rgba(255,255,255,.05),
						inset 0 -1px 0 rgba(0,0,0,.075);
			display: inline-block;
			border-radius: 0 2px 2px 0;
		}

		&.button {
			padding-left: 2px;
			padding-right: 2px;

			&:before,
			&:after {
				display: none;
			}

			&:active > span {
				padding-top: 5px;
				padding-bottom: 3px;
				box-shadow: 0 0 0;
			}
		}
	}

	selectbox {
		width: 120px;
		background: transparent;
		border: 2px solid @face;
		color: darken(@text, 7%);
		text-shadow: 0 1px 0 rgba(0,0,0,.35);

		&:before {
			background: transparent;
			border-color: transparent;
		}

		&:after {
			filter: invert(1) drop-shadow(0 1px 0 rgba(0,0,0,.25)) opacity(.75);
			top: 3px;
		}

		option {
			padding-top: 3px;
		}
	}

	.track-btn {
		position: relative;
		width: 27px;
		height: 18px;
		background: @boxBg;
		border: 2px solid @face;
		border-radius: 3px;
		display: inline-block;
		margin: 2px 0 2px;
		color: @base;
		text-shadow: 0 0 0;

		&.activator {
			height: 25px;
			padding-top: 4px;
			background: @highlight;
			color: darken(@highlight, 29%);
			font-size: 13px;
			font-weight: 400;

			&.off {
				background: lighten(@boxBg, 7%);
			}
		}

		&.solo {
			padding-top: 2px;

			&.active {
				background: #66f;
			}
		}

		&.record {
			height: 17px;
			font-size: 14px;
			line-height: .95;
			color: @face;

			&.active {
				background: #d66;
				color: @base;
			}
		}
	}

	// temp
	.show-session .bg-scrollbar .scroll-track .scroll-bar {
		top: 11%;
		height: 51%;
		bottom: 53px;
	}

	.bg-scrollbar {
		.scroll-track {
			position: absolute;
			top: 7px;
			bottom: 29px;
			left: 9px;
			width: 13px;
			border-radius: 13px;
			background: rgba(0,0,0,.125);
			// box-shadow: inset 0 0 7px rgba(0,0,0,.35);

			&:hover .scroll-bar {
				background: lighten(@boxBg, 5%);
			}

			.scroll-bar {
				position: absolute;
				top: 31%;
				left: 1px;
				width: 11px;
				height: 37%;
				border-radius: 13px;
				background: @boxBg;
				cursor: ns-resize;
			}
		}

		.togglers {
			position: absolute;
			left: 9px;
			bottom: 5px;
			padding-bottom: 3px;
			text-align: center;
			font-size: 10px;

			.toggler {
				position: relative;
				background: @base;
				color: @boxBg;
				width: 13px;
				height: 13px;
				border-radius: 50%;
				margin-top: 5px;
				cursor: pointer;
				box-shadow: 0 0 0 1px fadeout(@base, 11%);

				&.on {
					background: @highlight;
					color: @base;

					i[class*="icon-"] {
						filter: none;
					}
				}

				&.top-half {
					border-radius: 13px 13px 0 0;
				}

				&.bottom-half {
					border-radius: 0 0 13px 13px;
					margin-top: 2px;
				}
			}

			i[class*="icon-"] {
				position: absolute;
				top: 1px;
				left: 1px;
				width: 11px;
				height: 11px;
				background-position: 0 0;
				background-size: 11px 11px;
				background-repeat: no-repeat;
				filter: invert(50%) grayscale(100%);

				&.icon-toggle-headphones { background-image: url(~/icons/icon-toggle-headphones.png); }
				&.icon-toggle-io { background-image: url(~/icons/icon-toggle-io.png); }
				&.icon-toggle-sends { background-image: url(~/icons/icon-toggle-sends.png); }
				&.icon-toggle-returns { background-image: url(~/icons/icon-toggle-returns.png); }
				&.icon-toggle-mixers { background-image: url(~/icons/icon-toggle-mixers.png); }
			}
		}
	}

	.row-work {
		margin-top: 0;
		display: flex;
		flex: auto;

		> div {
			margin-left: @margin;
		}

		.buttons:first-child {
			margin-left: 0;
			padding: 2px 0 0 0;

			.ball-button {
				left: 2px;

				&.toggled {
					> i {
						top: 4px;
						transform: rotate(180deg);
					}
				}
			}
		}

		.buttons:last-child {
			padding: 2px 0 0 0;
		}
		
		.panel-left {
			--sidebar-width: 210px;
			width: var( --sidebar-width );
			display: flex;
			transition: width 200ms ease,
						margin 200ms ease,
						opacity 200ms ease 100ms;

			&.hide {
				width: 0;
				opacity: 0;
				margin-left: 0;
				transition: width 200ms ease,
							margin 200ms ease 200ms,
							opacity 200ms ease 100ms;
			}

			.bg-scrollbar {
				background: inherit;
				border-radius: 5px 0 0 5px;
				position: absolute;
				top: 137px;
				bottom: 0;
				left: -29px;
				width: 29px;

				&:before {
					content: "";
					background: url(~/icons/negative-corner.png) 50% 50%/contain no-repeat;
					position: absolute;
					right: 0;
					top: -6px;
					width: 6px;
					height: 6px;
				}

				&:after {
					display: none;
					content: "";
					position: absolute;
					top: 9px;
					left: 9px;
					bottom: 9px;
					width: 11px;
					border-radius: 9px;
					background: #1d344c;
					box-shadow: inset 0 0 0 1px @base;
				}
			}

			.panel-content {
				flex: auto;
				border-bottom-left-radius: 0;
			}

			.sidebar {
				position: absolute;
				top: 4px;
				left: 4px;
				right: 4px;
				bottom: 4px;
				perspective: 500px;

				.box-3d {
					position: relative;
					width: 100%;
					height: 100%;
					transform-style: preserve-3d;
					transition: transform 350ms ease;

					> div {
						transform-style: preserve-3d;
						//backface-visibility: hidden;
						position: absolute;
						width: inherit;
						height: inherit;
						display: flex;
						flex-direction: column;
						opacity: 0.5;
						transition: opacity 500ms ease;

						&.sounds-body      { transform: rotateY(   0deg) translateZ( calc( var( --sidebar-width ) / 2) ); }
						&.drums-body       { transform: rotateY(  90deg) translateZ( calc( var( --sidebar-width ) / 2) ); }
						&.instruments-body { transform: rotateY(-180deg) translateZ( calc( var( --sidebar-width ) / 2) ); }
						&.fx-body          { transform: rotateY( -90deg) translateZ( calc( var( --sidebar-width ) / 2) ); }
					}

					.box-title {
						height: 19px;
						padding: 2px 0 0 3px;
						color: @text;
						text-shadow: 0 1px 0 darken(@boxBg, 21%);
					}

					.box-body:not(.audio-chart) {
						flex: auto;
						padding: 2px;
						overflow-x: hidden;
						overflow-y: auto;
					}

					.audio-chart {
						height: 37px;
						margin-top: 3px;
						//background-image: url(~/cache/kick.png);
						background-size: auto 100%;
						background-position: 1px 50%;
						background-repeat: no-repeat;
						cursor: pointer;

						&:before {
							opacity: 0;
							content: "";
							position: absolute;
							top: 0;
							bottom: 0;
							left: 0;
							width: 0%;
							border-right: 1px solid #71a1ca;
							transition: width linear 600ms;
						}

						&.play:before {
							opacity: 1;
							width: 100%;
						}
					}
				}

				&.from-sounds-to-drums,
				&.from-sounds-to-instruments,
				&.from-sounds-to-fx,
				&.from-drums-to-sounds,
				&.from-drums-to-instruments,
				&.from-drums-to-fx,
				&.from-instruments-to-sounds,
				&.from-instruments-to-drums,
				&.from-instruments-to-fx,
				&.from-fx-to-sounds,
				&.from-fx-to-drums,
				&.from-fx-to-instruments {
					.box-3d {
						div.sounds-body,
						div.drums-body,
						div.instruments-body,
						div.fx-body {
							display: flex;
							opacity: 0.5;
							visibility: visible;
						}
					}
				}
				&.from-sounds-to-drums .box-3d       { animation: 800ms soundsToDrums ease-in-out forwards; }
				&.from-sounds-to-instruments .box-3d { animation: 1200ms soundsToInstruments ease-in-out forwards; }
				&.from-sounds-to-fx .box-3d          { animation: 800ms soundsToFx ease-in-out forwards; }
				&.from-drums-to-sounds .box-3d       { animation: 800ms drumsToSounds ease-in-out forwards; }
				&.from-drums-to-instruments .box-3d  { animation: 800ms drumsToInstruments ease-in-out forwards; }
				&.from-drums-to-fx .box-3d           { animation: 1200ms drumsToFx ease-in-out forwards; }
				&.from-instruments-to-sounds .box-3d { animation: 1200ms instrumentsToSounds ease-in-out forwards; }
				&.from-instruments-to-drums .box-3d  { animation: 800ms instrumentsToDrums ease-in-out forwards; }
				&.from-instruments-to-fx .box-3d     { animation: 800ms instrumentsToFx ease-in-out forwards; }
				&.from-fx-to-sounds .box-3d          { animation: 800ms fxToSounds ease-in-out forwards; }
				&.from-fx-to-drums .box-3d           { animation: 1200ms fxToDrums ease-in-out forwards; }
				&.from-fx-to-instruments .box-3d     { animation: 800ms fxToInstruments ease-in-out forwards; }
				

				&.show-sounds {
					.box-3d {
						transform: rotateY(0deg) translateZ( calc( var( --sidebar-width ) / -2) );
					
						.sounds-body { display: flex; opacity: 1; }
						.drums-body,
						.instruments-body,
						.fx-body { display: none; }
					}
				}

				&.show-drums {
					.box-3d {
						transform: rotateY(-90deg) translateX( calc( var( --sidebar-width ) / -2) );
					
						.drums-body { display: flex; opacity: 1; }
						.sounds-body,
						.instruments-body,
						.fx-body { display: none; }
					}
				}

				&.show-instruments {
					.box-3d {
						transform: rotateY(180deg) translateZ( calc( var( --sidebar-width ) / 2) );
					
						.instruments-body { display: flex; opacity: 1; }
						.drums-body,
						.sounds-body,
						.fx-body { display: none; }
					}
				}

				&.show-fx {
					.box-3d {
						transform: rotateY(90deg) translateX( calc( var( --sidebar-width ) / 2) );
					
						.fx-body { display: flex; opacity: 1; }
						.sounds-body,
						.instruments-body,
						.drums-body { display: none; }
					}
				}
			}

			// .item {
			// 	padding: 4px 3px 4px 3px;
			// 	border-radius: 2px;

			// 	&:not(:first-child) {
			// 		margin-top: 1px;
			// 	}

			// 	&.active {
			// 		background-color: lighten(@boxBg, 5%);
			// 		color: @text;
			// 	}
			// }

			// .folder {				
			// 	position: relative;
			// 	box-shadow: 0 0 0 transparent;
			// 	transition: box-shadow 400ms ease;

			// 	&:not(:first-child) {
			// 		margin-top: 1px;
			// 	}

			// 	&.open {
			// 		box-shadow: 0 1px 0 transparent;

			// 		> i         { transform: rotate(180deg); }
			// 		> span      { color: @text; }
			// 		> div > div { margin-top: 0; }
			// 	}

			// 	i {
			// 		position: absolute;
			// 		top: 5px;
			// 		left: 6px;
			// 		width: 10px;
			// 		height: 10px;
			// 		transform: rotate(90deg);
			// 		filter: brightness(1.75);
			// 		margin-right: 7px;
			// 		transition: transform 100ms ease;
			// 	}

			// 	span {
			// 		position: relative;
			// 		display: block;
			// 		padding: 4px 3px 4px 23px;
			// 		z-index: 2;

			// 		&:hover { color: @text; }
			// 	}

			// 	> div {
			// 		position: relative;
			// 		overflow: hidden;

			// 		> div {
			// 			margin-top: -100%;
			// 			transition: margin-top 400ms ease;

			// 			> .item {
			// 				background-position: 16px 50%;
			// 				padding-left: 35px;
			// 			}
			// 		}
			// 	}
			// }

			.folder,
			.item {
				position: relative;
				padding-left: 17px;

				> i {
					font-style: normal;
					display: inline-block;
					padding: 4px 7px 4px 4px;
					border-radius: 2px;
				}

				&:before {
					content: "";
					position: absolute;
					top: 1px;
					left: 1px;
					width: 17px;
					height: 17px;
					background: url(~/icons/icon-audio.png) 1px 1px no-repeat;
					background-size: auto 80%;
					filter: drop-shadow(0 1px 0 rgba(0,0,0,.65));
				}

				.children {
					padding: 1px 0 0 1px;
					// max-height: 0;
					// overflow: hidden;
				}

				&.active i {
					background-color: darken(@boxBg, 7%);
					color: @text;
					box-shadow: inset 0 1px 0 darken(@boxBg, 11%),
								inset 0 -1px 0 lighten(@boxBg, 3%);
				}
			}

			.folder {
				&:before {
					background-image: url(~/icons/icon-sidebar-arrow.png);
					background-position: 1px 2px;
					background-size: 13px 13px;
					filter: drop-shadow(0 1px 0 rgba(0,0,0,.35));
				}

				&.expanded {
					// max-height: 300px;
					
					&:before {
						transform: rotate(90deg);
						filter: drop-shadow(1px 0 0 rgba(0,0,0,.35));
					}
				}
			}
		}

		.panel-right {
			flex: auto;
			display: flex;
			--c: lighten(saturate(@boxBg, 17%), 13%);

			&.show-session {
				.session-wrapper { display: inherit; }
				.arrangement-wrapper { display: none; }
			}

			&.show-arrangement {
				.session-wrapper { display: none; }
				.arrangement-wrapper { display: inherit; }
			}

			.bg-scrollbar {
				background: inherit;
				border-radius: 0 5px 5px 0;
				position: absolute;
				top: 57px;
				bottom: 0;
				right: -29px;
				width: 29px;

				&:before {
					content: "";
					background: url(~/icons/negative-corner.png) 50% 50%/contain no-repeat;
					position: absolute;
					left: 0;
					top: -6px;
					width: 6px;
					height: 6px;
					transform: rotate(90deg);
				}

				&:after {
					display: none;
					content: "";
					position: absolute;
					top: 9px;
					left: 9px;
					bottom: 9px;
					width: 11px;
					border-radius: 9px;
					background: #1d344c;
					box-shadow: inset 0 0 0 1px @base;
				}

				.scroll-track {
					left: 7px;
					bottom: 79px;
				}

				.togglers {
					bottom: 7px;
					left: 7px;
					padding-bottom: 1px;
				}
			}

			.arrangement-wrapper {
				flex: auto;
				display: flex;
				border-bottom-right-radius: 0;
				--barW: 16px;
				--chanH: 67px;
				--colH: 21px;

				.arr-layout {
					flex: 1;
					display: flex;
					flex-direction: column;

						.col-clips {
							flex: 1;

							.box-body {
								background-image: repeating-linear-gradient(90deg,
										transparent 0px, transparent calc( var( --barW ) - 1px ),
										@gridlines calc( var( --barW ) - 1px ), @gridlines var( --barW )
									),
									repeating-linear-gradient(90deg,
										@gridgroup 0px, @gridgroup calc( var( --barW ) * 8 ),
										transparent calc( var( --barW ) * 8 ), transparent calc( var( --barW ) * 16 )
									);
							}
						}

						.col-mixers {
							width: 250px;
							margin-left: 2px;

							.channel {
								display: flex;
								flex-direction: row;
								// background-image: linear-gradient(90deg,
								// 	transparent 0px, transparent 73px,
								// 	@face 73px, @face 74px,
								// 	transparent 74px, transparent 132px,
								// 	@face 132px, @face 133px,
								// 	transparent 133px
								// );

								> div:not(:first-child) {
									margin-left: 1px;
									border-left: 1px solid @face;
								}

								.mix-head {
									width: 79px;
									display: flex;
									position: relative;

									&:before {
										content: "";
										position: absolute;
										top: 3px;
										left: 3px;
										width: 13px;
										height: 13px;
										border-radius: 50%;
										transform: rotate(90deg);
										background: rgba(0,0,0,.075);
										background-position: 0 0;
										background-size: 13px 13px;
										background-repeat: no-repeat;
										background-image: url(~/icons/icon-arrow-right.png);
										box-shadow: 0 0 0 1px rgba(0,0,0,.35);
									}

									.title {
										flex: 1;
										// border-radius: 2px;
										white-space: nowrap;
										text-overflow: ellipsis;
										overflow: hidden;
										padding: 4px 4px 0 21px;
										color: rgba(255,255,255,.65);
										background: var( --c );
										background-image: linear-gradient(0deg, rgba(0,0,0,.075) 0%, transparent 100%);
										box-shadow: inset 0 1px 0 rgba(255,255,255,.075),
													0 1px 2px rgba(0,0,0,.35);
									}
								}

								.mix-body {
									width: 73px;
								}

								.mix-foot {
									flex: 1;
								}
							}
						}

						.channel {
							height: var( --chanH );
							position: relative;
							border-bottom: 2px solid @griddark;

							&.collapsed {
								--chanH: var( --colH );

								.mix-head {
									&:before {
										transform: rotate(0deg);
									}
								}

								b {
									padding-top: 4px;

									&:before,
									&:after {
										display: none;
									}

									i:before {
										display: block;
									}
								}
							}

							// temp
							&:nth-child(2) {
								b:after {
									background-size: 16px auto;
								}
							}

							b {
								position: absolute;
								top: 0;
								left: calc( var( --l ) * var( --barW ) );
								width: calc( calc( var( --d ) * var( --barW ) ) - 1px );
								height: calc( var( --chanH ) - 2px );
								padding: 3px 4px 0;
								border-radius: 2px;
								color: rgba(255,255,255,.65);
								background-color: var( --c );
								background-image: linear-gradient(0deg, rgba(0,0,0,.075) 0%, transparent 100%);
								box-shadow: inset 0 1px 0 rgba(255,255,255,.075),
											0 1px 2px rgba(0,0,0,.35);

								&:before,
								&:after {
									content: "";
									position: absolute;
									top: 17px;
									left: 0;
									right: 0;
									bottom: 0;
									background-color: rgba(0,0,0,.125);
									background-image: var( --clip-bg );
									background-repeat-y: no-repeat;
									background-repeat-x: repeat;
									border-top: 1px solid rgba(0,0,0,.1);
									border-radius: 0 0 2px 2px;
								}

								&:before {
									background: transparent;
									background-image: repeating-linear-gradient(90deg,
												rgba(0,0,0,.05) calc( var( --barW ) - 1px ), rgba(0,0,0,.05) var( --barW ),
												transparent var( --barW ), transparent calc( calc( var( --barW ) * 2 ) - 1px )
											);
								}

								i {
									font-style: normal;

									&:before,
									&:after {
										content: "";
										display: none;
										position: absolute;
										top: 0;
										left: 0;
										right: 0;
										height: 3px;
										background-image: repeating-linear-gradient(90deg,
												rgba(0,0,0,.125) calc( var( --barW ) - 1px ), rgba(0,0,0,.125) var( --barW ),
												transparent var( --barW ), transparent calc( calc( var( --barW ) * 2 ) - 1px )
											);
									}

									&:after {
										display: block;
										top: auto;
										bottom: 0;
									}
								}
							}
						}


					.row-overview {
						height: 19px;
						margin: 1px 0;
						background-image: repeating-linear-gradient(180deg, @gridlines 3px, @gridlines 4px, transparent 4px, transparent 7px);

						.hotspot {
							position: absolute;
							top: -2px;
							left: 73px;
							width: 223px;
							bottom: -2px;
							border: 2px solid @base;
							// border-width: 2px 3px;
						}
					}

					.row-ruler {
						height: 25px;
						display: flex;
						margin-top: 17px;
						margin-bottom: 2px;

						.col-clips .box-body  { border-radius: 3px 3px 0 0; }

						.loop-span {
							position: absolute;
							top: 1px;
							left: 173px;
							width: 273px;
							height: 13px;
							border: 1px solid @base;
							background-color: lighten(@boxBg, 3%);
							box-shadow: inset 0 1px 0 rgba(255,255,255,.1),
										inset 0 -1px 0 rgba(0,0,0,.075);
							cursor: ew-resize;

							&:before {
								content: "";
								position: absolute;
								top: 0;
								left: 0;
								width: 11px;
								height: 11px;
								background-image: url(~/icons/icon-loopspan-start.png);
								background-position: -1px -1px;
								background-size: 13px 13px;
								background-repeat: no-repeat;
							}

							&:after {
								content: "";
								position: absolute;
								top: 0;
								right: 0;
								width: 11px;
								height: 11px;
								background-image: url(~/icons/icon-loopspan-end.png);
								background-position: -1px -1px;
								background-size: 13px 13px;
								background-repeat: no-repeat;
							}
						}
					}

					.row-track {
						flex: 1;
						display: flex;
						margin-bottom: 2px;

						.channel:nth-child(2) {
							background: fadeout(lighten(@boxBg, 13%), 85%);
						}

						.col-clips .box-body  {
							border-radius: 0 0 0 0;
						}

						.col-mixers .box-body {
							border-radius: 0 3px 0 0;
						}

						.time-cursor {
							position: absolute;
							top: 0;
							// bottom: 0;
							// left: 110px;
							transform: translateX( 111px );
							height: 0;
							width: 1px;
							z-index: 2;
							background: #0ff;
							animation: pulsate 3s ease-in-out infinite;

							&:before {
								content: "";
								position: absolute;
								left: -1px;
								top: -11px;
								width: 0;
								height: 0;
								border-right: 6px solid transparent;
								border-bottom: 6px solid #0ff;
								transform: rotate(-45deg);
								transform-origin: 100% 100%;
							}

							&:after {
								content: "";
								position: absolute;
								left: 0;
								top: 67px;
								width: 1px;
								height: 65px; // track height
								background: inherit;
							}
						}
					}

					.row-outputs {
						height: calc( calc( var( --colH ) * 3 ) + 1px );
						display: flex;

						.col-clips .box-body  {
							border-radius: 0 0 0 3px;
							background-image: repeating-linear-gradient(0deg,
									@griddark calc( var( --colH ) - 1px ), @griddark var( --colH ),
									transparent var( --colH ), transparent calc( var( --colH ) * 2 )
								),
								repeating-linear-gradient(90deg,
									transparent 0px, transparent calc( var( --barW ) - 1px ),
									@gridlines calc( var( --barW ) - 1px ), @gridlines var( --barW )
								),
								repeating-linear-gradient(90deg,
									@gridgroup 0px, @gridgroup calc( var( --barW ) * 8 ),
									transparent calc( var( --barW ) * 8 ), transparent calc( var( --barW ) * 16 )
								);
						}

						.col-mixers .box-body {
							border-radius: 0 0 3px 0;
							background-image: repeating-linear-gradient(0deg,
									@griddark calc( var( --colH ) - 1px ), @griddark var( --colH ),
									transparent var( --colH ), transparent calc( var( --colH ) * 2 )
								),
								linear-gradient(90deg,
									transparent 0px, transparent 73px,
									@face 73px, @face 74px,
									transparent 74px, transparent 132px,
									@face 132px, @face 133px,
									transparent 133px
								);
						}
					}
				}
			}

			.session-wrapper {
				flex: 1;
				border-radius: 5px 5px 0 5px;
				--slotW: 93px;
				--slotH: 19px;
				--selRow: 5;

				.sess-layout {
					position: relative;
					display: flex;
					flex: 1;

					&:after {
						content: "";
						position: absolute;
						top: 0;
						left: 0;
						right: 0;
						bottom: 0;
						pointer-events: none;
						background-image: linear-gradient(180deg,
								transparent 0,
								transparent calc( calc( var( --slotH ) * var( --selRow ) ) + 3px ),
								fadeout(lighten(@boxBg, 13%), 85%) calc( calc( var( --slotH ) * var( --selRow ) ) + 3px ),
								fadeout(lighten(@boxBg, 13%), 85%) calc( calc( var( --slotH ) * calc( var( --selRow ) + 1 ) ) + 2px ),
								transparent  calc( calc( var( --slotH ) * calc( var( --selRow ) + 1 ) ) + 2px )
							);
					}

					.tracks-wrapper {
						display: flex;
						flex: 1;
					}

					.io-master {
						display: flex;
						
						.tracks {
							.track {
								&:not(:last-child) .slots:before {
									display: none;
								}

								&:last-child {
									.slots:before {
										background-image: url(~/icons/icon-clip-play.png);
									}
								}
							}
						}
					}

					.tracks {
						display: flex;

						.track {
							width: var( --slotW );
							display: flex;
							flex-direction: column;
							margin-right: 2px;
							text-shadow: 0 1px 0 rgba(0,0,0,.2);

							&:last-child {
								margin-right: 0;
							}

							> div {
								background: @boxBg;
								margin-bottom: 1px;

								&.status {
									background: @boxBg;
									position: relative;
									z-index: 2;
									height: 21px;
									padding: 4px 5px 0 4px;
									border-radius: 0 0 2px 2px;
									margin-bottom: 2px;
									font-size: 0;

									> i {
										font-style: normal;
										font-size: 11px;
										margin-right: 7px;
									}
								}

								.btn-stop,
								.btn-play,
								.btn-record {
									display: inline-block;
									vertical-align: top;
									width: 13px;
									height: 13px;
									background-position: -3px -3px;
									background-size: 19px 19px;
									background-repeat: no-repeat;

									&.btn-stop { background-image: url(~/icons/icon-clip-stop.png); }
									&.btn-play { background-image: url(~/icons/icon-clip-play.png); }
									&.btn-record { background-image: url(~/icons/icon-clip-record.png); }
								}
							}

							.title {
								background: var( --c );
								color: @text;
								// box-shadow: inset 0 1px 0 lighten(@boxBg, 9%);
								height: 20px;
								padding: 5px 5px 0;
								border-radius: 3px 3px 0 0;

								background-image: linear-gradient(0deg, rgba(0,0,0,.1) 0%, transparent 100%);
								box-shadow: inset 0 1px 0 rgba(255,255,255,.1),
											0 1px 2px rgba(0,0,0,.35);
							}

							.slots {
								flex: 1;
								position: relative;
								background: transparent;
								background-image: linear-gradient(180deg,
										@boxBg calc( var( --slotH ) * 0 ), @boxBg calc( var( --slotH ) * 1 ), transparent calc( var( --slotH ) * 1 ), transparent calc( calc( var( --slotH ) * 1 ) + 1px ),
										@boxBg calc( var( --slotH ) * 1 ), @boxBg calc( var( --slotH ) * 2 ), transparent calc( var( --slotH ) * 2 ), transparent calc( calc( var( --slotH ) * 2 ) + 1px ),
										@boxBg calc( var( --slotH ) * 2 ), @boxBg calc( var( --slotH ) * 3 ), transparent calc( var( --slotH ) * 3 ), transparent calc( calc( var( --slotH ) * 3 ) + 1px ),
										@boxBg calc( var( --slotH ) * 3 ), @boxBg calc( var( --slotH ) * 4 ), transparent calc( var( --slotH ) * 4 ), transparent calc( calc( var( --slotH ) * 4 ) + 1px ),
										@boxBg calc( var( --slotH ) * 4 ), @boxBg calc( var( --slotH ) * 5 ), transparent calc( var( --slotH ) * 5 ), transparent calc( calc( var( --slotH ) * 5 ) + 1px ),
										@boxBg calc( var( --slotH ) * 5 ), @boxBg calc( var( --slotH ) * 6 ), transparent calc( var( --slotH ) * 6 ), transparent calc( calc( var( --slotH ) * 6 ) + 1px ),
										@boxBg calc( var( --slotH ) * 6 ), @boxBg calc( var( --slotH ) * 7 ), transparent calc( var( --slotH ) * 7 ), transparent calc( calc( var( --slotH ) * 7 ) + 1px ),
										@boxBg calc( var( --slotH ) * 7 )
									);
								line-height: var( --slotH );
								// --c: #77c; // default clip color

								&:before {
									content: "";
									position: absolute;
									top: 0;
									left: 0;
									width: 19px;
									height: calc( var( --slotH ) * 7 );
									z-index: 1;
									cursor: pointer;
									background-position: 0 0;
									background-size: 19px 19px;
									background-repeat: space;
									background-image: url(~/icons/icon-clip-record.png);
								}

								b {
									position: absolute;
									top: calc( calc( var( --r ) * var( --slotH ) ) + 1px );
									left: 0;
									right: 0;
									height: calc( var( --slotH ) - 1px );
									z-index: 2;
									padding: 0 5px 0 23px;
									border-radius: 2px;
									color: rgba(255,255,255,.65);
									background: var( --c );
									background-image: linear-gradient(0deg, rgba(0,0,0,.075) 0%, transparent 100%);
									box-shadow: inset 0 1px 0 rgba(255,255,255,.075),
												0 1px 2px rgba(0,0,0,.35);

									&:before {
										content: "";
										position: absolute;
										top: 0;
										left: 0;
										bottom: 0;
										width: calc( var( --slotH ) - 1px );
										border-right: 1px solid rgba(0,0,0,.35);
										border-radius: 2px 0 0 2px;
										background-color: rgba(0,0,0,.175);
									}

									&:after {
										content: "";
										position: absolute;
										top: 0;
										left: 0;
										bottom: 0;
										width: calc( var( --slotH ) - 1px );
										background-position: 4px 4px;
										background-size: 10px 10px;
										background-repeat: no-repeat;
										background-image: url(~/icons/icon-pad-play.png);
										filter: brightness(1.15) drop-shadow(0 1px 0 rgba(0,0,0,.35));
										opacity: .5;
										cursor: pointer;
									}

									&:hover:after{
										opacity: 1;
									}
								}
							}

							.io {
								height: 47px;
								border-radius: 2px 2px 0 0;
							}

							.sends {
								position: relative;
								height: 59px;
								padding-top: 19px;
								text-align: center;

								&:after {
									content: attr(data-name);
									position: absolute;
									left: 49px;
									right: 3px;
									top: 5px;
									color: darken(@face, 3%);
									text-shadow: 0 0 0;
									text-align: left;
								}

								.knob {
									&:nth-child(1) {
										top: -13px;
										left: 2px;
									}

									&:nth-child(2) {
										left: -2px;
									}
								}
							}

							.mixer {
								display: flex;
								justify-content: space-evenly;
								height: 133px;
								padding-top: 9px;
								margin-bottom: 0;
								text-align: center;
								border-radius: 0 0 3px 3px;
								box-shadow: 0 1px 0 darken(@boxBg, 15%);

								> div:first-child {
									width: 36px;
								}

								.pan-knob {
									margin: 3px 0 5px;
								}
							}
						}
					}

					.space {
						margin: 0 2px;
					}
				}
			}
		}
	}

	.panel-bottom {
		--pH: 224px;
		// height: 224px;
		// height: 360px;
		// height: 420px;
		height: var( --pH );
		display: flex;
		transition: height 150ms ease,
					margin 150ms ease,
					opacity 150ms ease 100ms;

		&.show-midi {
			--pH: 420px;
		}
			
		&.show-devices .devices-body,
		&.show-drumkit .drumkit-body,
		&.show-midi .midi-body {
			display: flex;
		}

		&.hide {
			height: 0;
			opacity: 0;
			margin-top: 0;
		}

		.rack {
			flex: auto;
			display: flex;

			// .devices-body {
			// 	> div {
			// 		padding: 5px;
			// 	}
			// }

			> div {
				display: none;
				flex: auto;

				> div {
					
					&:not(:first-child) {
						margin-left: 3px;
					}

					> .title {
						height: 17px;
						padding: 0 5px 5px;
						border-bottom: 1px solid @face;
						margin: -1px -5px 5px;
					}
				}
			}

			.midi-note-editor {
				flex: 1;
				display: flex;
				flex-direction: column;
				position: relative;
				--keyH: 16px;
				--noteW: 12px;
				--bars: 4;
				--c: #77c; // default note color

				&.drumkit {
					--keyH: 22px;

					.row-head,
					.row-foot {
						.col-left {
							width: 130px;
						}
					}

					.row-body {
						.col-left {
							width: 130px;

							.box-body {
								.body-frame {
									background: none;
									height: 100%;

									&:before {
										left: 96px;
									}

									&:after {
										left: 97px;
									}

									ul { display: none; }
									ol { display: block; } // drumkit names
								}
							}
						}
					}
				}

					.col-left {
						display: flex;
						width: 53px;
						margin: 0 1px 0 0;

						.box-body  {
							overflow: hidden;
						}
					}

					.col-right {
						flex: 1;
						margin: 0;
						position: relative;
						display: flex;

						.box-body  {
							flex: 1;
							position: relative;
							width: 100px;
							overflow: hidden;

							.body-frame  {
								position: relative;
								height: 100%;
								width: calc( var( --noteW ) * var( --bars ) * 16 );
							}
						}
					}

					.velocity-toggler {
						position: absolute;
						left: 3px;
						bottom: 3px;
						width: 13px;
						height: 13px;
						cursor: pointer;
						border-radius: 50%;
						// transform: rotate(90deg);
						background-color: darken(@boxBg, 3%);
						background-position: 0 0;
						background-size: 13px 13px;
						background-repeat: no-repeat;
						background-image: url(~/icons/icon-arrow-right.png);
						box-shadow: 0 0 0 1px rgba(0,0,0,.35);
					}

				.row-head {
					height: 51px;
					display: flex;

					.col-left .box-body {
						border-radius: 3px 0 0 0;
					}

					.col-right .box-body  {
						border-radius: 0 3px 0 0;
						// background-image: ;

						.body-frame {
							&:before {
								content: "";
								position: absolute;
								top: 0;
								left: 0;
								right: 0;
								bottom: 0;
								z-index: 1;
								background-image: linear-gradient(180deg,
										transparent 0px,
										transparent 15px,
										lighten(@boxBg, 1.5%) 15px,
										lighten(@boxBg, 1.5%) 36px,
										darken(@boxBg, 1.5%) 36px
									);
							}

							&:after {
								content: "";
								position: absolute;
								top: 13px;
								left: 0;
								right: 0;
								bottom: 0;
								z-index: 2;
								background-image: linear-gradient(180deg,
										transparent 0px,
										transparent 22px,
										@face 22px,
										@face 23px,
										transparent 23px
									),
									repeating-linear-gradient(90deg,
										transparent 0px,
										transparent calc( calc( var( --noteW ) * 4 ) - 1px ),
										@griddark calc( calc( var( --noteW ) * 4 ) - 1px ),
										@griddark calc( var( --noteW ) * 4 )
									),
									repeating-linear-gradient(90deg,
										transparent 0px,
										transparent calc( var( --noteW ) - 1px ),
										@gridlines calc( var( --noteW ) - 1px ),
										@gridlines var( --noteW )
									);
							}
						}

						ul {
							list-style: none;
							position: relative;
							white-space: nowrap;
							overflow: hidden;
							font-size: 0;
							color: @base;
							text-shadow: 0 0 0;
							
							&:before {
								content: "";
								position: absolute;
								left: 0;
								right: 1px;
								bottom: 0;
								height: 5px;
								z-index: 3;
								background-image: repeating-linear-gradient(90deg,
										transparent 0px,
										transparent calc( calc( var( --noteW ) * 16 ) - 1px ),
										darken(@griddark, 7%) calc( calc( var( --noteW ) * 16 ) - 1px ),
										darken(@griddark, 7%) calc( var( --noteW ) * 16 )
									);
							}

							li {
								display: inline-block;
								padding: 5px 0 0 0;
								font-size: 9px;
								width: calc( var( --noteW ) * 16 );
							}
						}
					}

					.length-span,
					.loop-span {
						// display: none;
						position: absolute;
						top: 15px;
						left: 0;
						width: 576px;
						height: 11px;
						background-color: #d5a516; // temp
						box-shadow: inset 0 1px 0 rgba(255,255,255,.1),
									inset 0 -1px 0 rgba(0,0,0,.075);
						border: 1px solid @base;
						cursor: ew-resize;
						z-index: 3;

						&:before {
							content: "";
							position: absolute;
							top: 0;
							left: 0;
							width: 9px;
							height: 9px;
							background-image: url(~/icons/icon-loopspan-start.png);
							background-position: -2px -2px;
							background-size: 13px 13px;
							background-repeat: no-repeat;
						}

						&:after {
							content: "";
							position: absolute;
							top: 0;
							right: 0;
							width: 9px;
							height: 9px;
							background-image: url(~/icons/icon-loopspan-end.png);
							background-position: -2px -2px;
							background-size: 13px 13px;
							background-repeat: no-repeat;
						}
					}

					.length-span {
						background-color: lighten(@boxBg, 3%);
						top: 25px;
						width: calc( var( --noteW ) * 16 );
					}

					.time-cursor {
						position: absolute;
						top: 52px;
						height: calc( var( --pH ) - 60px );
						// height: 250px;
						// left: 110px;
						transform: translateX( 107px );
						width: 1px;
						z-index: 2;
						background: #0ff;
						animation: pulsate 3s ease-in-out infinite;

						&:before {
							content: "";
							position: absolute;
							left: -1px;
							top: -11px;
							width: 0;
							height: 0;
							border-right: 6px solid transparent;
							border-bottom: 6px solid #0ff;
							transform: rotate(-45deg);
							transform-origin: 100% 100%;
						}

						// &:after {
						// 	content: "";
						// 	position: absolute;
						// 	left: 0;
						// 	top: 100%;
						// 	width: 1px;
						// 	height: 50px;
						// 	margin-top: 1px;
						// 	background: inherit;
						// }
					}

					.time-end {
						position: absolute;
						top: 0;
						height: calc( var( --pH ) - 8px );
						left: 767px;
						width: 1px;
						z-index: 2;
						background: @base;
					}
				}

				.row-body {
					flex: 1;
					display: flex;
					margin: 1px 0;
					overflow: hidden;

					.col-left .box-body {
						overflow: hidden;
						border-radius: 0;
						
						.body-frame {
							position: absolute;
							width: 100%;
							// height: calc( var( --keyH ) * 120); // temp
							background-image: repeating-linear-gradient(180deg,
									transparent 0px,
									transparent calc( var( --keyH ) * 12 ),
									@face calc( var( --keyH ) * 12 ),
									@face calc( calc( var( --keyH ) * 12 ) + 1px ),
								);

							&:before {
								content: "";
								position: absolute;
								top: 0;
								bottom: 0;
								left: 19px;
								width: 31px;
								border-left: 2px solid @griddark;
								border-right: 1px solid rgba(0,0,0,.3);
								background-image: repeating-linear-gradient(180deg,
									#fff 0px, #fff 1px,
									@pianoWhite 1px, @pianoWhite calc( var( --keyH ) * 1.5 ),
									@pianoLine2 calc( var( --keyH ) * 1.5 ), @pianoLine2 calc( calc( var( --keyH ) * 1.5 ) + 1px ),
									#fff calc( calc( var( --keyH ) * 1.5 ) + 1px ), #fff calc( calc( var( --keyH ) * 1.5 ) + 2px ),
									@pianoWhite calc( calc( var( --keyH ) * 1.5 ) + 2px ), @pianoWhite calc( var( --keyH ) * 3.5 ),
									@pianoLine2 calc( var( --keyH ) * 3.5 ), @pianoLine2 calc( calc( var( --keyH ) * 3.5 ) + 1px ),
									#fff calc( calc( var( --keyH ) * 3.5 ) + 1px ), #fff calc( calc( var( --keyH ) * 3.5 ) + 2px ),
									@pianoWhite calc( calc( var( --keyH ) * 3.5 ) + 2px ), @pianoWhite calc( var( --keyH ) * 5.5 ),
									@pianoLine2 calc( var( --keyH ) * 5.5 ), @pianoLine2 calc( calc( var( --keyH ) * 5.5 ) + 1px ),
									#fff calc( calc( var( --keyH ) * 5.5 ) + 1px ), #fff calc( calc( var( --keyH ) * 5.5 ) + 2px ),
									@pianoWhite calc( calc( var( --keyH ) * 5.5 ) + 2px ), @pianoWhite calc( var( --keyH ) * 7 ),
									@pianoLine1 calc( var( --keyH ) * 7 ), @pianoLine1 calc( calc( var( --keyH ) * 7 ) + 1px ),
									#fff calc( calc( var( --keyH ) * 7 ) + 1px ), #fff calc( calc( var( --keyH ) * 7 ) + 2px ),
									@pianoWhite calc( calc( var( --keyH ) * 7 ) + 2px ), @pianoWhite calc( var( --keyH ) * 8.5 ),
									@pianoLine2 calc( var( --keyH ) * 8.5 ), @pianoLine2 calc( calc( var( --keyH ) * 8.5 ) + 1px ),
									#fff calc( calc( var( --keyH ) * 8.5 ) + 1px ), #fff calc( calc( var( --keyH ) * 8.5 ) + 2px ),
									@pianoWhite calc( calc( var( --keyH ) * 8.5 ) + 2px ), @pianoWhite calc( var( --keyH ) * 10.5 ),
									@pianoLine2 calc( var( --keyH ) * 10.5 ), @pianoLine2 calc( calc( var( --keyH ) * 10.5 ) + 1px ),
									#fff calc( calc( var( --keyH ) * 10.5 ) + 1px ), #fff calc( calc( var( --keyH ) * 10.5 ) + 2px ),
									@pianoWhite calc( calc( var( --keyH ) * 10.5 ) + 2px ), @pianoWhite calc( var( --keyH ) * 12 ),
									@pianoLine1 calc( var( --keyH ) * 12 ), @pianoLine1 calc( calc( var( --keyH ) * 12 ) + 1px )
								);
							}

							&:after {
								content: "";
								position: absolute;
								top: 0;
								bottom: 0;
								left: 20px;
								width: 26px;
								background-image: repeating-linear-gradient(180deg,
									transparent 0px, transparent calc( var( --keyH ) * 1 ),
									@pianoBlack calc( var( --keyH ) * 1 ), @pianoBlack calc( var( --keyH ) * 2 ),
									transparent calc( var( --keyH ) * 2 ), transparent calc( var( --keyH ) * 3 ),
									@pianoBlack calc( var( --keyH ) * 3 ), @pianoBlack calc( var( --keyH ) * 4 ),
									transparent calc( var( --keyH ) * 4 ), transparent calc( var( --keyH ) * 5 ),
									@pianoBlack calc( var( --keyH ) * 5 ), @pianoBlack calc( var( --keyH ) * 6 ),
									transparent calc( var( --keyH ) * 6 ), transparent calc( var( --keyH ) * 8 ),
									@pianoBlack calc( var( --keyH ) * 8 ), @pianoBlack calc( var( --keyH ) * 9 ),
									transparent calc( var( --keyH ) * 9 ), transparent calc( var( --keyH ) * 10 ),
									@pianoBlack calc( var( --keyH ) * 10 ), @pianoBlack calc( var( --keyH ) * 11 ),
									transparent calc( var( --keyH ) * 11 ), transparent calc( var( --keyH ) * 12 )
								);
							}

							ol {
								display: none;
								position: relative;
								z-index: 2;
								width: 97px;
								height: 100%;
								padding-top: 1px;
								// background-image: repeating-linear-gradient(180deg,
								// 	transparent 0px,
								// 	transparent var( --keyH ),
								// 	@face var( --keyH ),
								// 	@face calc( var( --keyH ) + 1px ),
								// );
								box-shadow: 3px 0 11px 3px rgba(0,0,0,.45);

								li {
									white-space: nowrap;
									text-overflow: ellipsis;
									overflow: hidden;
									padding: 1px 3px 0;
									height: var( --keyH );
									line-height: var( --keyH );
									// text-shadow: 0 0 0;
									// color: darken(@face, 3%);
									box-shadow: inset 0 1px 0 lighten(@boxBg, 1%),
												inset 0 -1px 0 @face;
								}
							}

							ul {
								position: relative;
								display: block;
								z-index: 2;
								width: 21px;
								box-shadow: 3px 0 11px 3px rgba(0,0,0,.45);

								li {
									display: flex;
									align-items: flex-end;
									line-height: 1.35;
									padding-left: 3px;
									text-shadow: 0 0 0;
									color: darken(@face, 3%);
									height: calc( calc( var( --keyH ) * 12) + 1px );
								}
							}
						}
					}

					.col-right {
						.box-body {
							// height: 307px;
							border-radius: 0;

							.body-frame  {
								line-height: var( --keyH );
								height: calc( var( --keyH ) * 11 * 12 );
								background-image: repeating-linear-gradient(180deg,
										transparent 0px, transparent calc( var( --keyH ) * 1 ),
										@gridblack calc( var( --keyH ) * 1 ), @gridblack calc( var( --keyH ) * 2 ),
										transparent calc( var( --keyH ) * 2 ), transparent calc( var( --keyH ) * 3 ),
										@gridblack calc( var( --keyH ) * 3 ), @gridblack calc( var( --keyH ) * 4 ),
										transparent calc( var( --keyH ) * 4 ), transparent calc( var( --keyH ) * 5 ),
										@gridblack calc( var( --keyH ) * 5 ), @gridblack calc( var( --keyH ) * 6 ),
										transparent calc( var( --keyH ) * 6 ), transparent calc( var( --keyH ) * 7 ),
										lighten(@gridblack, 2%) calc( var( --keyH ) * 7 ), lighten(@gridblack, 2%) calc( calc( var( --keyH ) * 7 ) + 1px ),
										transparent calc( var( --keyH ) * 7 ), transparent calc( var( --keyH ) * 8 ),
										@gridblack calc( var( --keyH ) * 8 ), @gridblack calc( var( --keyH ) * 9 ),
										transparent calc( var( --keyH ) * 9 ), transparent calc( var( --keyH ) * 10 ),
										@gridblack calc( var( --keyH ) * 10 ), @gridblack calc( var( --keyH ) * 11 ),
										transparent calc( var( --keyH ) * 11 ), transparent calc( var( --keyH ) * 12 ),
										darken(@gridblack, 3%) calc( var( --keyH ) * 12 ), darken(@gridblack, 3%) calc( calc( var( --keyH ) * 12 ) + 1px )
									),
									repeating-linear-gradient(90deg,
											transparent 0px,
											transparent calc( calc( var( --noteW ) * 4 ) - 1px ),
											@griddark calc( calc( var( --noteW ) * 4 ) - 1px ),
											@griddark calc( var( --noteW ) * 4 )
										),
									repeating-linear-gradient(90deg,
											transparent 0px,
											transparent calc( var( --noteW ) - 1px ),
											@gridlines calc( var( --noteW ) - 1px ),
											@gridlines var( --noteW )
										),
									repeating-linear-gradient(90deg,
											@gridgroup 0px,
											@gridgroup calc( var( --noteW ) * 16 ),
											transparent calc( var( --noteW ) * 16 ),
											transparent calc( var( --noteW ) * 32 )
										);

								.selection {
									position: absolute;
									top: calc( var( --keyH ) * var( --t ) );
									left: calc( var( --noteW ) * var( --l ) );
									width: calc( var( --noteW ) * var( --d ) );
									height: calc( var( --keyH ) * var( --o ) );
									background-color: #0ff;
									mix-blend-mode: overlay;
									opacity: .25;
								}

								b {
									// font-size: calc( var( --keyH ) - 2px );
									position: absolute;
									top: calc( calc( var( --t ) * var( --keyH ) ) + 1px );
									left: calc( var( --l ) * var( --noteW ) );
									width: calc( calc( var( --d ) * var( --noteW ) ) - 1px );
									height: calc( var( --keyH ) - 2px );
									padding: 0 5px;
									border-radius: 2px;
									color: rgba(255,255,255,.65);
									background: var( --c );
									background-image: linear-gradient(0deg, rgba(0,0,0,.075) 0%, transparent 100%);
									box-shadow: inset 0 1px 0 rgba(255,255,255,.075),
												0 1px 2px rgba(0,0,0,.35);
								}
							}
						}
					}
				}

				.row-foot {
					height: 50px;
					display: flex;

					.col-left .box-body {
						border-radius: 0 0 0 3px;
					}

					.col-right .box-body  {
						border-radius: 0 0 3px 0;
						
						.body-frame {
							position: relative;
							background-image: repeating-linear-gradient(90deg,
									transparent 0px,
									transparent calc( calc( var( --noteW ) * 4 ) - 1px ),
									@griddark calc( calc( var( --noteW ) * 4 ) - 1px ),
									@griddark calc( var( --noteW ) * 4 )
								),
								repeating-linear-gradient(90deg,
									transparent 0px,
									transparent calc( var( --noteW ) - 1px ),
									@gridlines calc( var( --noteW ) - 1px ),
									@gridlines var( --noteW )
								),
								repeating-linear-gradient(90deg,
									@gridgroup 0px,
									@gridgroup calc( var( --noteW ) * 16 ),
									transparent calc( var( --noteW ) * 16 ),
									transparent calc( var( --noteW ) * 32 )
								);

							b {
								position: absolute;
								bottom: 0;
								width: 2px;
								top: calc( calc( 37px - calc( var( --v ) * 37px ) ) + 13px );
								left: calc( var( --l ) * var( --noteW ) );
								background: #5bb;

								&:hover {
									background: #77c;

									&:before {
										border-color: #77c;
									}
								}

								&:before {
									content: "";
									position: absolute;
									top: -6px;
									left: -3px;
									width: 4px;
									height: 4px;
									border: 2px solid #5bb;
									border-radius: 50%;
									cursor: ns-resize;
								}
							}
						}
					}
				}
			}
		}

		.drumkit-body {
			display: block;
		}

		.rack-body {
			display: flex;
			flex-direction: column;

			.rack-head {
				position: relative;
				padding: 5px 5px 5px 23px;
				// margin-bottom: 1px;
				border-radius: 3px 3px 0 0;
				background: lighten(@boxBg, 3%);
				box-shadow: inset 0 1px 0 fadeout(lighten(@boxBg, 5%), 50%),
							inset 0 -1px 0 darken(@boxBg, 7%);

				.icon-blank {
					position: absolute;
					top: 4px;
					left: 5px;
					width: 13px;
					height: 13px;
					border-radius: 50%;
					background: @highlight;
					box-shadow: inset 0 0 0 1px darken(@highlight, 29%);
				}
			}

			.box-body {
				flex: 1;
				border-radius: 0 0 3px 3px;
				padding: 5px;
				display: flex;

				.graph {
					background: @base;
					position: relative;
					height: 132px;
					border-radius: 3px;
					padding: 3px 4px 4px 4px;

					&.has-values{
						&:after {
							content: "";
							position: absolute;
							bottom: 17px;
							left: 7px;
							right: 7px;
							height: 1px;
							background: @face;
						}

						canvas {
							height: calc( 100% - 17px );
						}
					}

					canvas {
						width: 100%;
						height: 100%;
						background-position: 0 50%;
						background-repeat: no-repeat;
					}
				}

				.graph + .controls {
					padding: 3px 0 0;
					display: flex;

					> div {
						position: relative;
						margin-right: 17px;

						&.space {
							flex: auto;
							background: transparent;
							margin: 0;
						}

						&:last-child {
							margin: 0;
						}

						span {
							position: absolute;
							top: -16px;
							left: 0;
							right: 0;
							font-size: 10px;
							text-align: center;
							color: lighten(@boxBg, 7%);
						}

						label {
							position: relative;
							top: -2px;
							display: block;
							// color: darken(@face, 3%);
							font-size: 9px;
							text-align: center;
							text-transform: uppercase;
							// text-shadow: 0 0 0;
						}
					}

					.knob {
						transform: scale(.85);
					}
				}
			}
		}

		.device-control {
			width: 239px;

			.box-body {
				display: block;
			}
		}

		.sample-display {
			width: 520px;
		}

		ul.controls {
			list-style: none;
			padding: 1px 0 0 1px;
			font-size: 0;

			li {
				position: relative;
				vertical-align: top;
				display: inline-block;
				width: 55px;
				height: 87px;
				font-size: 11px;
				text-align: center;
				box-shadow: 0 0 0 1px lighten(@base, 13%);
				border-radius: 3px;
				margin: 0 5px 5px 0;

				&:nth-child(3n) {
					margin-right: 0;
				}

				&:nth-child(5),
				&:nth-child(6),
				&:nth-child(7),
				&:nth-child(8) {
					margin-bottom: 0;
				}

				.ctrl-name {
					background: lighten(@boxBg, 4%);
					padding: 5px 2px 0;
					display: block;
					height: 32px;
					overflow: hidden;
					line-height: 12px;
					border-radius: 3px 3px 0 0;
					border-bottom: 1px solid lighten(@base, 13%);
				}

				.ctrl-knob {
					margin-top: 5px;
				}

				.ctrl-value {
					display: block;
					text-align: center;
					font-size: 10px;
				}
			}
		}

		.pads {
			flex: 1;
			display: flex;
			flex-direction: row;

			.pad-matrix {
				position: relative;
				top: 7px;
				background: url(~/icons/icon-pad-matrix.png) 0 -10px repeat-y;
				filter: drop-shadow(0 1px 0 fadeout(@base, 53%));
				background-size: 20px 40px;
				width: 20px;
				height: 170px;
				margin-right: 5px;

				.cursor {
					position: absolute;
					top: 110px;
					left: 0;
					width: 19px;
					height: 19px;
					box-shadow: 0 0 0 1px darken(@base, 37%);
					background: url(~/icons/icon-pad-matrix.png) 0 0 repeat-y;
					background-size: 20px 40px;
					filter: brightness(1.25) hue-rotate(190deg) saturate(1.25);
				}
			}

			ul.pad-list {
				list-style: none;
				width: 253px;
				padding: 1px 0 1px 1px;
				font-size: 0;

				&.disable-mute {
					i.pad-mute {
						opacity: .35;
						text-shadow: 0 0 0;
					}
				}

				li {
					position: relative;
					vertical-align: top;
					display: inline-block;
					width: 59px;
					height: 41px;
					font-size: 11px;
					text-align: center;
					box-shadow: 0 0 0 1px lighten(@base, 7%);
					border-radius: 3px;
					margin: 0 5px 5px 0;

					&:nth-child(4n) {
						margin-right: 0;
					}

					&:nth-child(13),
					&:nth-child(14),
					&:nth-child(15),
					&:nth-child(16) {
						margin-bottom: 0;
					}

					&.active {
						.pad-name {
							background: lighten(saturate(@boxBg, 23%), 17%);
							color: @base;
							box-shadow: 0 0 0;
							text-shadow: 0 0 0;
						}
					}

					.pad-name {
						background: lighten(@boxBg, 4%);
						box-shadow: inset 0 1px 0 lighten(@boxBg, 7%),
									inset 0 -1px 0 darken(@boxBg, .5%);
						padding: 2px 2px 0;
						display: flex;
						// align-items: center;
						justify-content: center;
						height: 27px;
						overflow: hidden;
						line-height: 12px;
						border-radius: 3px 3px 0 0;
						border-bottom: 1px solid lighten(@base, 11%);
					}

					i {
						position: absolute;
						bottom: 0;
						width: 20px;
						height: 14px;
						font-style: normal;
						padding-top: 2px;
						border-right: 1px solid lighten(@base, 7%);
						cursor: pointer;
						opacity: .6;

						&:hover {
							opacity: 1;
						}
					}

					.pad-mute {
						left: 0;
						border-radius: 0 0 0 3px;

						&:active,
						&.active {
							background: #d66;
							color: @base;
							text-shadow: 0 0 0;
							opacity: 1;
						}
					}

					.pad-play {
						left: 19px;
						width: 21px;

						&:before {
							content: "";
							position: absolute;
							top: 2px;
							left: 5px;
							width: 10px;
							height: 10px;
							background-image: url(~/icons/icon-pad-play.png);
							background-position: 0 0;
							background-size: 10px 10px;
							background-repeat: no-repeat;
							filter: drop-shadow(0 1px 0 darken(@boxBg, 13%));
						}

						&:active:before,
						&.active:before {
							filter: brightness(1.25) saturate(2);
						}
					}

					.pad-solo {
						left: 40px;
						width: 19px;
						border-right: 0;
						border-radius: 0 0 3px 0;

						&:active,
						&.active {
							background: #66f;
							color: @base;
							text-shadow: 0 0 0;
							opacity: 1;
						}
					}
				}
			}
		}
	}

	.row-foot {
		height: 30px;
		display: flex;

		> div {
			margin-left: @margin;
		}

		.status-bar {
			flex: auto;
			margin-left: 0;
		}

		.foot-devices,
		.foot-drumkit,
		.foot-midi {
			cursor: pointer;

			.box-body {
				padding: 5px 10px 0;
				text-shadow: 0 1px 0 darken(@boxBg, 17%);
				color: darken(@text, 7%);
			}

			&:hover:not(.active) .box-body {
				color: lighten(@text, 11%);
			}

			&.active {
				cursor: default;
				border-radius: 5px;

				&:before,
				&:after {
					content: "";
					background: url(~/icons/negative-corner.png) 50% 50%/contain no-repeat;
					position: absolute;
					left: -8px;
					top: -4px;
					width: 8px;
					height: 8px;
					transform: rotate(270deg);
					transition: opacity 60ms ease;
				}

				&:after {
					left: auto;
					right: -8px;
					transform: rotate(180deg);
				}

				&.hidden {
					&:before,
					&:after {
						opacity: 0;
						transition: opacity 60ms ease 100ms;
					}
					.box-body {
						background: @boxBg;
						padding-top: 5px;

						&:before {
							opacity: 0;
							transition: opacity 60ms ease 100ms;
						}
					}
				}

				.box-body {
					background: transparent;
					color: @text;
					text-shadow: 0 1px 0 darken(@boxBg, 13%);
					box-shadow: 0 0 0;
					padding-top: 4px;

					&:before {
						content: "";
						background: @face;
						position: absolute;
						top: -8px;
						left: -4px;
						right: -4px;
						height: 8px;
						transition: opacity 60ms ease;
					}
				}
			}

		}

		.ball-button {
			top: 3px;

			&.toggled {
				> i {
					left: 2px;
					transform: rotate(-90deg);
				}
			}
		}
	}

	// temp
	.track:nth-child(1) .pie-playing { filter: hue-rotate(220deg) saturate(120%); }
	.track:nth-child(2) .pie-playing { filter: hue-rotate(90deg) saturate(50%); }


	.pie-playing {
		display: inline-block;
		vertical-align: top;
		width: 15px;
		height: 15px;
		position: relative;
		top: -1px;
		left: 17px;
		background-size: 100% auto;
		background-repeat: no-repeat;
		background-image: url(~/icons/icon-pie-playing.png);
		// --duration: 9999s;

		&.on { animation: playOn var( --duration ) steps(33) infinite; }

		&[data-value="1"], &[data-value="2"], &[data-value="3"], &[data-value="4"] { background-position: 0 0; }
		&[data-value="5"], &[data-value="6"], &[data-value="7"] { background-position: 0 -15px; }
		&[data-value="8"], &[data-value="9"], &[data-value="10"] { background-position: 0 -30px; }
		&[data-value="11"], &[data-value="12"], &[data-value="13"] { background-position: 0 -45px; }
		&[data-value="14"], &[data-value="15"], &[data-value="16"] { background-position: 0 -60px; }
		&[data-value="17"], &[data-value="18"], &[data-value="19"] { background-position: 0 -75px; }
		&[data-value="20"], &[data-value="21"], &[data-value="22"] { background-position: 0 -90px; }
		&[data-value="23"], &[data-value="24"], &[data-value="25"] { background-position: 0 -105px; }
		&[data-value="26"], &[data-value="27"], &[data-value="28"] { background-position: 0 -120px; }
		&[data-value="29"], &[data-value="30"], &[data-value="31"] { background-position: 0 -135px; }
		&[data-value="32"], &[data-value="33"], &[data-value="34"] { background-position: 0 -150px; }
		&[data-value="35"], &[data-value="36"], &[data-value="37"] { background-position: 0 -165px; }
		&[data-value="38"], &[data-value="39"], &[data-value="40"] { background-position: 0 -180px; }
		&[data-value="41"], &[data-value="42"], &[data-value="43"] { background-position: 0 -195px; }
		&[data-value="44"], &[data-value="45"], &[data-value="46"] { background-position: 0 -210px; }
		&[data-value="47"], &[data-value="48"], &[data-value="49"] { background-position: 0 -225px; }
		&[data-value="50"], &[data-value="51"], &[data-value="52"] { background-position: 0 -240px; }
		&[data-value="53"], &[data-value="54"], &[data-value="55"] { background-position: 0 -255px; }
		&[data-value="56"], &[data-value="57"], &[data-value="58"] { background-position: 0 -270px; }
		&[data-value="59"], &[data-value="60"], &[data-value="61"] { background-position: 0 -285px; }
		&[data-value="62"], &[data-value="63"], &[data-value="64"] { background-position: 0 -300px; }
		&[data-value="65"], &[data-value="66"], &[data-value="67"] { background-position: 0 -315px; }
		&[data-value="68"], &[data-value="69"], &[data-value="70"] { background-position: 0 -330px; }
		&[data-value="71"], &[data-value="72"], &[data-value="73"] { background-position: 0 -345px; }
		&[data-value="74"], &[data-value="75"], &[data-value="76"] { background-position: 0 -360px; }
		&[data-value="77"], &[data-value="78"], &[data-value="79"] { background-position: 0 -375px; }
		&[data-value="80"], &[data-value="81"], &[data-value="82"] { background-position: 0 -390px; }
		&[data-value="83"], &[data-value="84"], &[data-value="85"] { background-position: 0 -405px; }
		&[data-value="86"], &[data-value="87"], &[data-value="88"] { background-position: 0 -420px; }
		&[data-value="89"], &[data-value="90"], &[data-value="91"] { background-position: 0 -435px; }
		&[data-value="92"], &[data-value="93"], &[data-value="94"] { background-position: 0 -450px; }
		&[data-value="95"], &[data-value="96"], &[data-value="97"] { background-position: 0 -465px; }
		&[data-value="98"], &[data-value="99"], &[data-value="100"] { background-position: 0 -480px; }

	}

	i[class*="icon-"] {
		background: 50% 50%/contain no-repeat;
		position: relative;
		display: inline-block;
		width: 17px;
		height: 17px;

		&.icon-sounds      { background-image: url(~/icons/icon-sounds.png); }
		&.icon-drums       { background-image: url(~/icons/icon-drums.png); }
		&.icon-instruments { background-image: url(~/icons/icon-instruments.png); }
		&.icon-audio_fx    { background-image: url(~/icons/icon-audio_fx.png); }
		&.icon-arrangement { background-image: url(~/icons/icon-arrangement.png); }
		&.icon-session     { background-image: url(~/icons/icon-session.png); }
		&.icon-arrow_up    { background-image: url(~/icons/icon-arrow_up.png); }
		&.icon-arrow_up.right { transform: rotate(90deg); }
	}
}


@keyframes playOn {
	0%   { background-position: 0px 0px; }
	100% { background-position: 0px -495px; }
}

@keyframes soundsToDrums {
	0%   { transform: translateZ( calc( var( --sidebar-width ) / -2) ) rotateY(0deg); }
	30%  { transform: translateZ( calc( var( --sidebar-width ) * -1) ) rotateY(0deg); }
	70%  { transform: translateZ( calc( var( --sidebar-width ) * -1) ) rotateY(-90deg); }
	100% { transform: translateZ( calc( var( --sidebar-width ) / -2) ) rotateY(-90deg); }
}

@keyframes soundsToInstruments {
	0%   { transform: translateZ( calc( var( --sidebar-width ) / -2) ) rotateY(0deg); }
	15%  { transform: translateZ( calc( var( --sidebar-width ) * -1) ) rotateY(0deg); }
	85%  { transform: translateZ( calc( var( --sidebar-width ) * -1) ) rotateY(-180deg); }
	100% { transform: translateZ( calc( var( --sidebar-width ) / -2) ) rotateY(-180deg); }
}

@keyframes soundsToFx {
	0%   { transform: translateZ( calc( var( --sidebar-width ) / -2) ) rotateY(0deg); }
	30%  { transform: translateZ( calc( var( --sidebar-width ) * -1) ) rotateY(0deg); }
	70%  { transform: translateZ( calc( var( --sidebar-width ) * -1) ) rotateY(90deg); }
	100% { transform: translateZ( calc( var( --sidebar-width ) / -2) ) rotateY(90deg); }
}

@keyframes drumsToSounds {
	0%   { transform: translateZ( calc( var( --sidebar-width ) / -2) ) rotateY(-90deg); }
	30%  { transform: translateZ( calc( var( --sidebar-width ) * -1) ) rotateY(-90deg); }
	70%  { transform: translateZ( calc( var( --sidebar-width ) * -1) ) rotateY(0deg); }
	100% { transform: translateZ( calc( var( --sidebar-width ) / -2) ) rotateY(0deg); }
}

@keyframes drumsToInstruments {
	0%   { transform: translateZ( calc( var( --sidebar-width ) / -2) ) rotateY(-90deg); }
	30%  { transform: translateZ( calc( var( --sidebar-width ) * -1) ) rotateY(-90deg); }
	70%  { transform: translateZ( calc( var( --sidebar-width ) * -1) ) rotateY(-180deg); }
	100% { transform: translateZ( calc( var( --sidebar-width ) / -2) ) rotateY(-180deg); }
}

@keyframes drumsToFx {
	0%   { transform: translateZ( calc( var( --sidebar-width ) / -2) ) rotateY(-90deg); }
	15%  { transform: translateZ( calc( var( --sidebar-width ) * -1) ) rotateY(-90deg); }
	85%  { transform: translateZ( calc( var( --sidebar-width ) * -1) ) rotateY(90deg); }
	100% { transform: translateZ( calc( var( --sidebar-width ) / -2) ) rotateY(90deg); }
}

@keyframes instrumentsToSounds {
	0%   { transform: translateZ( calc( var( --sidebar-width ) / -2) ) rotateY(-180deg); }
	15%  { transform: translateZ( calc( var( --sidebar-width ) * -1) ) rotateY(-180deg); }
	85%  { transform: translateZ( calc( var( --sidebar-width ) * -1) ) rotateY(0deg); }
	100% { transform: translateZ( calc( var( --sidebar-width ) / -2) ) rotateY(0deg); }
}

@keyframes instrumentsToDrums {
	0%   { transform: translateZ( calc( var( --sidebar-width ) / -2) ) rotateY(-180deg); }
	30%  { transform: translateZ( calc( var( --sidebar-width ) * -1) ) rotateY(-180deg); }
	70%  { transform: translateZ( calc( var( --sidebar-width ) * -1) ) rotateY(-90deg); }
	100% { transform: translateZ( calc( var( --sidebar-width ) / -2) ) rotateY(-90deg); }
}

@keyframes instrumentsToFx {
	0%   { transform: translateZ( calc( var( --sidebar-width ) / -2) ) rotateY(-180deg); }
	30%  { transform: translateZ( calc( var( --sidebar-width ) * -1) ) rotateY(-180deg); }
	70%  { transform: translateZ( calc( var( --sidebar-width ) * -1) ) rotateY(-270deg); }
	100% { transform: translateZ( calc( var( --sidebar-width ) / -2) ) rotateY(-270deg); }
}

@keyframes fxToSounds {
	0%   { transform: translateZ( calc( var( --sidebar-width ) / -2) ) rotateY(90deg); }
	30%  { transform: translateZ( calc( var( --sidebar-width ) * -1) ) rotateY(90deg); }
	70%  { transform: translateZ( calc( var( --sidebar-width ) * -1) ) rotateY(0deg); }
	100% { transform: translateZ( calc( var( --sidebar-width ) / -2) ) rotateY(0deg); }
}

@keyframes fxToDrums {
	0%   { transform: translateZ( calc( var( --sidebar-width ) / -2) ) rotateY(90deg); }
	15%  { transform: translateZ( calc( var( --sidebar-width ) * -1) ) rotateY(90deg); }
	85%  { transform: translateZ( calc( var( --sidebar-width ) * -1) ) rotateY(-90deg); }
	100% { transform: translateZ( calc( var( --sidebar-width ) / -2) ) rotateY(-90deg); }
}

@keyframes fxToInstruments {
	0%   { transform: translateZ( calc( var( --sidebar-width ) / -2) ) rotateY(90deg); }
	30%  { transform: translateZ( calc( var( --sidebar-width ) * -1) ) rotateY(90deg); }
	70%  { transform: translateZ( calc( var( --sidebar-width ) * -1) ) rotateY(180deg); }
	100% { transform: translateZ( calc( var( --sidebar-width ) / -2) ) rotateY(180deg); }
}


@keyframes spectrum {
	0% { transform: scaleY(0.2); }
	40% { transform: scaleY(0.6); }
	50% { transform: scaleY(0.1); }
	60% { transform: scaleY(0.3); }
	80% { transform: scaleY(0.4); }
	100% { transform: scaleY(0.2); }
}

@keyframes pulsate {
	0% { background: #0ff; }
	50% { background: #00ffff50; }
	100% { background: #0ff; }
}


